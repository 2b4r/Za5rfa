<!DOCTYPE html>

<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" />
<title>المزخرف — مولد نصوص مزخرفة</title>
<meta name="description" content="المزخرف: اكتب نصك واحصل على عشرات الأشكال والخطوط المزخرفة القابلة للنسخ فورًا." />
<style>
  :root{
    --bg:#0f172a; --panel:#0b1220; --muted:#94a3b8; --border:#1f2937; --accent:#06b6d4; --txt:#e5e7eb;
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--txt);font:15px/1.6 system-ui,Segoe UI,Arial}
  header{position:sticky;top:0;background:#0f172acc;backdrop-filter:blur(8px);border-bottom:1px solid var(--border);z-index:5}
  .wrap{max-width:1100px;margin:0 auto;padding:14px}
  .row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
  .brand{display:flex;gap:8px;align-items:center;font-weight:800}
  .brand .logo{filter:drop-shadow(0 0 12px #00e5ff77)}
  .muted{color:var(--muted)}
  main .grid{display:grid;grid-template-columns:1fr;gap:14px;padding:14px}
  @media(min-width:950px){ main .grid{grid-template-columns: 1fr 1fr} }
  .card{background:var(--panel);border:1px solid var(--border);border-radius:16px;padding:12px}
  textarea,.input{width:100%;background:#0b1628;color:#fff;border:1px solid var(--border);border-radius:12px;padding:10px 12px;outline:none}
  .btn{border:1px solid var(--border);background:#142033;color:#d9f6ff;border-radius:10px;padding:8px 12px;cursor:pointer}
  .btn:hover{filter:brightness(1.08)} .btn[disabled]{opacity:.5;cursor:not-allowed}
  .accent{background:rgba(6,182,212,.2)}
  .list{display:grid;grid-template-columns:1fr;gap:10px;max-height:65vh;overflow:auto;padding-right:2px}
  .item{border:1px solid var(--border);border-radius:12px;padding:10px;background:#0b1322}
  .item .head{display:flex;justify-content:space-between;align-items:center;gap:8px}
  .item .name{font-weight:700;color:#aeeaff}
  .out{white-space:pre-wrap;direction:auto;margin-top:6px}
  .tools{display:flex;gap:8px;flex-wrap:wrap}
  .pill{background:#0e1a2d;border:1px solid #22324a;border-radius:999px;padding:4px 10px;color:#b9d7f2;font-size:12px}
  .tip{font-size:12px;color:#9fb3c8}
</style>
</head>
<body>
<header>
  <div class="wrap row" style="justify-content:space-between">
    <div class="brand"><span class="logo">✨</span> <span>المزخرف</span></div>
    <div class="row">
      <span class="pill">يدعم النسخ الفوري</span>
      <span class="pill">متوافق مع الموبايل</span>
    </div>
  </div>
</header>

<main class="wrap">
  <section class="card">
    <label class="muted" for="src">اكتب النص هنا:</label>
    <textarea id="src" rows="4" placeholder="اكتب اسمك، جملة، أو أي نص..."></textarea>
    <div class="row" style="margin-top:8px">
      <input id="filter" class="input" placeholder="فلترة الأنماط (اكتب: bold, fraktur, عربي, دوائر...)" />
    </div>
    <div class="row" style="margin-top:8px">
      <button id="btnCopyAll" class="btn accent">نسخ كل النتائج</button>
      <button id="btnClear"   class="btn">مسح</button>
      <span class="tip">💡 أفضل الزخارف للاتيني؛ للعربي جرّب “تطويل” و”تشكيل خفيف”.</span>
    </div>
    <div class="row" style="margin-top:6px">
      <label class="pill"><input id="optKashida" type="checkbox" /> تطويل عربي (ـ)</label>
      <label class="pill"><input id="optTashkeel" type="checkbox" /> تشكيل خفيف</label>
      <label class="pill"><input id="optDecor1" type="checkbox" /> زخرفة •✧•</label>
      <label class="pill"><input id="optDecor2" type="checkbox" /> زخرفة ⌯⟡⌯</label>
    </div>
  </section>

  <section class="card">
    <div class="row" style="justify-content:space-between;align-items:center">
      <div class="muted">الأنماط المتاحة</div>
      <span id="count" class="pill">— نتيجة</span>
    </div>
    <div id="list" class="list" aria-live="polite"></div>
  </section>

  <section class="card">
    <h3 style="margin:6px 0">ملاحظات سريعة</h3>
    <ul style="margin:6px 0 0 0;padding-left:18px;line-height:1.7">
      <li>بعض الأجهزة قد لا تدعم كل الحروف المظللة (𝔣𝔯𝔞𝔨𝔱𝔲𝔯، 𝓼𝓬𝓻𝓲𝓹𝓽…). لو شكل غريب ظهر، جرّب نمطًا آخر.</li>
      <li>للعربي: “تطويل” يضيف ـ بين الحروف المناسبة، و“تشكيل خفيف” يضيف حركات متفرقة بدون مبالغة.</li>
      <li>كل النتائج **نص قابل للنسخ**، مش صور.</li>
    </ul>
  </section>
</main>

<script>
/* ========= Helpers ========= */
const $ = sel => document.querySelector(sel);
const src = $('#src'), list = $('#list'), countEl = $('#count'), filterEl = $('#filter');
const optK = $('#optKashida'), optT = $('#optTashkeel'), optD1 = $('#optDecor1'), optD2 = $('#optDecor2');

const AR_LET = /[\u0621-\u064A]/;
function isArabic(ch){ return AR_LET.test(ch); }

/* ========= Unicode Maps (Latin) ========= */
const base = {
  u: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ',
  l: 'abcdefghijklmnopqrstuvwxyz',
  d: '0123456789'
};
function mapByOffset(txt, offU, offL, offD){
  let out = '';
  for (const ch of txt){
    const iu = base.u.indexOf(ch), il = base.l.indexOf(ch), id = base.d.indexOf(ch);
    if (iu>-1 && offU!=null) out += String.fromCodePoint(ch.codePointAt(0) - 0x41 + offU);
    else if (il>-1 && offL!=null) out += String.fromCodePoint(ch.codePointAt(0) - 0x61 + offL);
    else if (id>-1 && offD!=null) out += String.fromCodePoint(ch.codePointAt(0) - 0x30 + offD);
    else out += ch;
  }
  return out;
}

// Special maps (script/fraktur exceptions, circled, small, upside)
const OV_FRK = { 'C':'\u212D','H':'\u210C','I':'\u2111','R':'\u211C','Z':'\u2128' };
const OV_SCR = { 'B':'\u212C','E':'\u2130','F':'\u2131','H':'\u210B','I':'\u2110','L':'\u2112','M':'\u2133','R':'\u211B' };

function mapScript(txt){
  let out='';
  for (const ch of txt){
    const iu = base.u.indexOf(ch), il = base.l.indexOf(ch);
    if (iu>-1){
      out += OV_SCR[ch] || String.fromCodePoint(0x1D49C + iu);
    } else if (il>-1){
      out += String.fromCodePoint(0x1D4B6 + il);
    } else out += ch;
  }
  return out;
}
function mapFraktur(txt){
  let out='';
  for (const ch of txt){
    const iu = base.u.indexOf(ch), il = base.l.indexOf(ch);
    if (iu>-1){
      out += OV_FRK[ch] || String.fromCodePoint(0x1D504 + iu);
    } else if (il>-1){
      out += String.fromCodePoint(0x1D51E + il);
    } else out += ch;
  }
  return out;
}
function mapCircled(txt){
  let out='';
  for (const ch of txt){
    const iu=base.u.indexOf(ch), il=base.l.indexOf(ch), id=base.d.indexOf(ch);
    if (iu>-1) out += String.fromCodePoint(0x24B6 + iu);
    else if (il>-1) out += String.fromCodePoint(0x24D0 + il);
    else if (id>-1){
      if (ch==='0') out += '\u24EA';
      else out += String.fromCodePoint(0x2460 + (id-1));
    } else out += ch;
  }
  return out;
}

// Tiny superscripts (approx)
const SUP = {
  a:'ᵃ',b:'ᵇ',c:'ᶜ',d:'ᵈ',e:'ᵉ',f:'ᶠ',g:'ᵍ',h:'ʰ',i:'ᶦ',j:'ʲ',k:'ᵏ',l:'ˡ',m:'ᵐ',n:'ⁿ',o:'ᵒ',p:'ᵖ',q:'ᑫ',r:'ʳ',s:'ˢ',t:'ᵗ',u:'ᵘ',v:'ᵛ',w:'ʷ',x:'ˣ',y:'ʸ',z:'ᶻ',
  A:'ᴬ',B:'ᴮ',D:'ᴰ',E:'ᴱ',G:'ᴳ',H:'ᴴ',I:'ᴵ',J:'ᴶ',K:'ᴷ',L:'ᴸ',M:'ᴹ',N:'ᴺ',O:'ᴼ',P:'ᴾ',R:'ᴿ',T:'ᵀ',U:'ᵁ',V:'ⱽ',W:'ᵂ',
  '0':'⁰','1':'¹','2':'²','3':'³','4':'⁴','5':'⁵','6':'⁶','7':'⁷','8':'⁸','9':'⁹'
};
function mapSup(txt){ return [...txt].map(ch=>SUP[ch]||ch).join(''); }

// Small-caps (approx using Unicode)
const SC = {'a':'ᴀ','b':'ʙ','c':'ᴄ','d':'ᴅ','e':'ᴇ','f':'ꜰ','g':'ɢ','h':'ʜ','i':'ɪ','j':'ᴊ','k':'ᴋ','l':'ʟ','m':'ᴍ','n':'ɴ','o':'ᴏ','p':'ᴘ','q':'ǫ','r':'ʀ','s':'s','t':'ᴛ','u':'ᴜ','v':'ᴠ','w':'ᴡ','x':'x','y':'ʏ','z':'ᴢ'};
function mapSmallCaps(txt){ return [...txt].map(ch=>SC[ch]||SC[ch?.toLowerCase()]||ch).join(''); }

// Upside-down
const UP = {'a':'ɐ','b':'q','c':'ɔ','d':'p','e':'ǝ','f':'ɟ','g':'ƃ','h':'ɥ','i':'ᴉ','j':'ɾ','k':'ʞ','l':'ן','m':'ɯ','n':'u','o':'o','p':'d','q':'b','r':'ɹ','s':'s','t':'ʇ','u':'n','v':'ʌ','w':'ʍ','x':'x','y':'ʎ','z':'z',
'A':'∀','B':'ꓭ','C':'Ɔ','D':'◖','E':'Ǝ','F':'Ⅎ','G':'⅁','H':'H','I':'I','J':'ſ','K':'ʞ','L':'˥','M':'W','N':'N','O':'O','P':'Ԁ','Q':'Ό','R':'ᴚ','S':'S','T':'⊥','U':'∩','V':'Λ','W':'M','X':'X','Y':'⅄','Z':'Z',
'0':'0','1':'Ɩ','2':'ᄅ','3':'Ɛ','4':'ㄣ','5':'ϛ','6':'9','7':'ㄥ','8':'8','9':'6'};
function mapUpside(txt){
  return [...txt].reverse().map(ch=>UP[ch]||ch).join('');
}

/* ========= Arabic helpers ========= */
function applyKashida(s){
  // أضف ـ بين الحروف العربية المتجاورة فقط
  const chars = [...s];
  let out = '';
  for (let i=0;i<chars.length;i++){
    out += chars[i];
    if ( AR_LET.test(chars[i]) && AR_LET.test(chars[i+1]||'') ) out += '\u0640'; // ـ
  }
  return out;
}
function applyTashkeelLight(s){
  const diacs = ['\u064E','\u064F','\u0650','\u0652']; // فتحة، ضمة، كسرة، سكون
  let out='', n=0;
  for (const ch of s){
    out += ch;
    if (AR_LET.test(ch) && (++n%2===0)) out += diacs[n%diacs.length];
  }
  return out;
}
function decorate(s,mode){
  if(!s.trim()) return s;
  if(mode===1) return `•✧ ${s} ✧•`;
  if(mode===2) return `⌯⟡ ${s} ⟡⌯`;
  return s;
}

/* ========= Styles ========= */
const STYLES = [
  {id:'plain',    name:'عادي (بدون تغيير)', fn:(t)=>t},
  {id:'bold',     name:'سميك Bold',          fn:(t)=>mapByOffset(t,0x1D400,0x1D41A,0x1D7CE)},
  {id:'italic',   name:'مائل Italic',        fn:(t)=>mapByOffset(t,0x1D434,0x1D44E,null)},
  {id:'boldit',   name:'سميك مائل',          fn:(t)=>mapByOffset(t,0x1D468,0x1D482,null)},
  {id:'sansb',    name:'Sans عريض',          fn:(t)=>mapByOffset(t,0x1D5D4,0x1D5EE,0x1D7EC)},
  {id:'mono',     name:'Monospace',          fn:(t)=>mapByOffset(t,0x1D670,0x1D68A,0x1D7F6)},
  {id:'script',   name:'Script مزخرف',       fn:mapScript},
  {id:'frak',     name:'Fraktur',            fn:mapFraktur},
  {id:'ds',       name:'Double‑Struck',      fn:(t)=>mapByOffset(t,0x1D538,0x1D552,0x1D7D8)},
  {id:'circ',     name:'حروف داخل دوائر',    fn:mapCircled},
  {id:'sup',      name:'حجم صغير (Superscript)', fn:mapSup},
  {id:'sc',       name:'Small‑Caps (تقريبي)', fn:mapSmallCaps},
  {id:'flip',     name:'مقلوب (Upside‑Down)', fn:mapUpside},
  // Arabic-oriented
  {id:'kashida',  name:'عربي — تطويل (ـ)',  fn:applyKashida},
  {id:'tashkeel', name:'عربي — تشكيل خفيف',  fn:applyTashkeelLight},
];

/* ========= Render ========= */
function genAll(){
  const raw = src.value || '';
  const mods = {
    k: optK.checked,
    t: optT.checked,
    d1: optD1.checked,
    d2: optD2.checked,
  };
  const q = (filterEl.value||'').trim().toLowerCase();
  const results = [];

  for (const st of STYLES){
    if (q && !(`${st.id} ${st.name}`.toLowerCase().includes(q))) continue;
    let out = st.fn(raw);
    // optional decorations for Arabic/any
    if (mods.k && st.id!=='kashida') out = applyKashida(out);
    if (mods.t && st.id!=='tashkeel') out = applyTashkeelLight(out);
    if (mods.d1) out = decorate(out,1);
    if (mods.d2) out = decorate(out,2);

    results.push({id:st.id, name:st.name, text:out});
  }

  list.innerHTML = results.map(r=>`
    <div class="item">
      <div class="head">
        <div class="name">${r.name}</div>
        <div class="tools">
          <button class="btn" data-copy="${escapeHtml(r.text)}">نسخ</button>
        </div>
      </div>
      <div class="out">${escapeHtml(r.text) || '<span class="muted">—</span>'}</div>
    </div>
  `).join('');

  // bind copy
  list.querySelectorAll('[data-copy]').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const txt = btn.getAttribute('data-copy');
      copyText(decodeHtml(txt));
      btn.textContent='✓ تم النسخ'; setTimeout(()=>btn.textContent='نسخ',900);
    });
  });

  countEl.textContent = results.length + ' نتيجة';
}
function copyText(s){
  if (navigator.clipboard?.writeText) navigator.clipboard.writeText(s);
  else {
    const t=document.createElement('textarea'); t.value=s; document.body.appendChild(t);
    t.select(); document.execCommand('copy'); t.remove();
  }
}
function escapeHtml(s){ return s.replace(/[&<>"]/g, m=>({ '&':'&amp;','<':'&lt;','>':'&gt;' }[m])); }
function decodeHtml(s){ return s.replace(/&amp;/g,'&').replace(/&lt;/g,'<').replace(/&gt;/g,'>'); }

/* ========= Events ========= */
['input','change'].forEach(ev=>{
  src.addEventListener(ev, genAll);
  filterEl.addEventListener(ev, genAll);
  optK.addEventListener(ev, genAll);
  optT.addEventListener(ev, genAll);
  optD1.addEventListener(ev, genAll);
  optD2.addEventListener(ev, genAll);
});

document.getElementById('btnCopyAll').onclick = ()=>{
  const texts=[...list.querySelectorAll('.out')].map(d=>d.textContent).join('\n');
  copyText(texts); alert('تم نسخ كل النتائج.');
};
document.getElementById('btnClear').onclick = ()=>{
  src.value=''; genAll();
};

// Load sample + autosave
const KEY='mazakhref_input_v1';
src.value = localStorage.getItem(KEY) || '';
src.addEventListener('input', ()=>localStorage.setItem(KEY, src.value));

// initial
genAll();
</script>

</body>
</html>
