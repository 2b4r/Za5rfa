<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" />
<title>Ø§Ù„Ù…Ø²Ø®Ø±Ù â€” Ù…ÙˆÙ„Ø¯ Ù†ØµÙˆØµ Ù…Ø²Ø®Ø±ÙØ©</title>
<meta name="description" content="Ø§Ù„Ù…Ø²Ø®Ø±Ù: Ø§ÙƒØªØ¨ Ù†ØµÙƒ ÙˆØ§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø¹Ø´Ø±Ø§Øª Ø§Ù„Ø£Ø´ÙƒØ§Ù„ ÙˆØ§Ù„Ø®Ø·ÙˆØ· Ø§Ù„Ù…Ø²Ø®Ø±ÙØ© Ø§Ù„Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ù†Ø³Ø® ÙÙˆØ±Ù‹Ø§." />
<style>
  :root{
    --bg:#0f172a; --panel:#0b1220; --muted:#94a3b8; --border:#1f2937; --accent:#06b6d4; --txt:#e5e7eb;
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--txt);font:15px/1.6 system-ui,Segoe UI,Arial}
  header{position:sticky;top:0;background:#0f172acc;backdrop-filter:blur(8px);border-bottom:1px solid var(--border);z-index:5}
  .wrap{max-width:1100px;margin:0 auto;padding:14px}
  .row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
  .brand{display:flex;gap:8px;align-items:center;font-weight:800}
  .brand .logo{filter:drop-shadow(0 0 12px #00e5ff77)}
  .muted{color:var(--muted)}
  main .grid{display:grid;grid-template-columns:1fr;gap:14px;padding:14px}
  @media(min-width:950px){ main .grid{grid-template-columns: 1fr 1fr} }
  .card{background:var(--panel);border:1px solid var(--border);border-radius:16px;padding:12px}
  textarea,.input{width:100%;background:#0b1628;color:#fff;border:1px solid var(--border);border-radius:12px;padding:10px 12px;outline:none}
  .btn{border:1px solid var(--border);background:#142033;color:#d9f6ff;border-radius:10px;padding:8px 12px;cursor:pointer}
  .btn:hover{filter:brightness(1.08)} .btn[disabled]{opacity:.5;cursor:not-allowed}
  .accent{background:rgba(6,182,212,.2)}
  .list{display:grid;grid-template-columns:1fr;gap:10px;max-height:65vh;overflow:auto;padding-right:2px}
  .item{border:1px solid var(--border);border-radius:12px;padding:10px;background:#0b1322}
  .item .head{display:flex;justify-content:space-between;align-items:center;gap:8px}
  .item .name{font-weight:700;color:#aeeaff}
  .out{white-space:pre-wrap;direction:auto;margin-top:6px}
  .tools{display:flex;gap:8px;flex-wrap:wrap}
  .pill{background:#0e1a2d;border:1px solid #22324a;border-radius:999px;padding:4px 10px;color:#b9d7f2;font-size:12px}
  .tip{font-size:12px;color:#9fb3c8}
</style>
</head>
<body>
<header>
  <div class="wrap row" style="justify-content:space-between">
    <div class="brand"><span class="logo">âœ¨</span> <span>Ø§Ù„Ù…Ø²Ø®Ø±Ù</span></div>
    <div class="row">
      <span class="pill">ÙŠØ¯Ø¹Ù… Ø§Ù„Ù†Ø³Ø® Ø§Ù„ÙÙˆØ±ÙŠ</span>
      <span class="pill">Ù…ØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„</span>
    </div>
  </div>
</header>

<main class="wrap">
  <section class="card">
    <label class="muted" for="src">Ø§ÙƒØªØ¨ Ø§Ù„Ù†Øµ Ù‡Ù†Ø§:</label>
    <textarea id="src" rows="4" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…ÙƒØŒ Ø¬Ù…Ù„Ø©ØŒ Ø£Ùˆ Ø£ÙŠ Ù†Øµ..."></textarea>
    <div class="row" style="margin-top:8px">
      <input id="filter" class="input" placeholder="ÙÙ„ØªØ±Ø© Ø§Ù„Ø£Ù†Ù…Ø§Ø· (Ø§ÙƒØªØ¨: bold, fraktur, Ø¹Ø±Ø¨ÙŠ, Ø¯ÙˆØ§Ø¦Ø±...)" />
    </div>
    <div class="row" style="margin-top:8px">
      <button id="btnCopyAll" class="btn accent">Ù†Ø³Ø® ÙƒÙ„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬</button>
      <button id="btnClear"   class="btn">Ù…Ø³Ø­</button>
      <span class="tip">ğŸ’¡ Ø£ÙØ¶Ù„ Ø§Ù„Ø²Ø®Ø§Ø±Ù Ù„Ù„Ø§ØªÙŠÙ†ÙŠØ› Ù„Ù„Ø¹Ø±Ø¨ÙŠ Ø¬Ø±Ù‘Ø¨ â€œØªØ·ÙˆÙŠÙ„â€ Ùˆâ€ØªØ´ÙƒÙŠÙ„ Ø®ÙÙŠÙâ€.</span>
    </div>
    <div class="row" style="margin-top:6px">
      <label class="pill"><input id="optKashida" type="checkbox" /> ØªØ·ÙˆÙŠÙ„ Ø¹Ø±Ø¨ÙŠ (Ù€)</label>
      <label class="pill"><input id="optTashkeel" type="checkbox" /> ØªØ´ÙƒÙŠÙ„ Ø®ÙÙŠÙ</label>
      <label class="pill"><input id="optDecor1" type="checkbox" /> Ø²Ø®Ø±ÙØ© â€¢âœ§â€¢</label>
      <label class="pill"><input id="optDecor2" type="checkbox" /> Ø²Ø®Ø±ÙØ© âŒ¯âŸ¡âŒ¯</label>
    </div>
  </section>

  <section class="card">
    <div class="row" style="justify-content:space-between;align-items:center">
      <div class="muted">Ø§Ù„Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ù…ØªØ§Ø­Ø©</div>
      <span id="count" class="pill">â€” Ù†ØªÙŠØ¬Ø©</span>
    </div>
    <div id="list" class="list" aria-live="polite"></div>
  </section>

  <section class="card">
    <h3 style="margin:6px 0">Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø³Ø±ÙŠØ¹Ø©</h3>
    <ul style="margin:6px 0 0 0;padding-left:18px;line-height:1.7">
      <li>Ø¨Ø¹Ø¶ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ù‚Ø¯ Ù„Ø§ ØªØ¯Ø¹Ù… ÙƒÙ„ Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ù…Ø¸Ù„Ù„Ø© (ğ”£ğ”¯ğ”ğ”¨ğ”±ğ”²ğ”¯ØŒ ğ“¼ğ“¬ğ“»ğ“²ğ“¹ğ“½â€¦). Ù„Ùˆ Ø´ÙƒÙ„ ØºØ±ÙŠØ¨ Ø¸Ù‡Ø±ØŒ Ø¬Ø±Ù‘Ø¨ Ù†Ù…Ø·Ù‹Ø§ Ø¢Ø®Ø±.</li>
      <li>Ù„Ù„Ø¹Ø±Ø¨ÙŠ: â€œØªØ·ÙˆÙŠÙ„â€ ÙŠØ¶ÙŠÙ Ù€ Ø¨ÙŠÙ† Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©ØŒ Ùˆâ€œØªØ´ÙƒÙŠÙ„ Ø®ÙÙŠÙâ€ ÙŠØ¶ÙŠÙ Ø­Ø±ÙƒØ§Øª Ù…ØªÙØ±Ù‚Ø© Ø¨Ø¯ÙˆÙ† Ù…Ø¨Ø§Ù„ØºØ©.</li>
      <li>ÙƒÙ„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ **Ù†Øµ Ù‚Ø§Ø¨Ù„ Ù„Ù„Ù†Ø³Ø®**ØŒ Ù…Ø´ ØµÙˆØ±.</li>
    </ul>
  </section>
</main>

<script>
/* ========= Helpers ========= */
const $ = sel => document.querySelector(sel);
const src = $('#src'), list = $('#list'), countEl = $('#count'), filterEl = $('#filter');
const optK = $('#optKashida'), optT = $('#optTashkeel'), optD1 = $('#optDecor1'), optD2 = $('#optDecor2');

const AR_LET = /[\u0621-\u064A]/;
function isArabic(ch){ return AR_LET.test(ch); }

/* ========= Unicode Maps (Latin) ========= */
const base = {
  u: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ',
  l: 'abcdefghijklmnopqrstuvwxyz',
  d: '0123456789'
};
function mapByOffset(txt, offU, offL, offD){
  let out = '';
  for (const ch of txt){
    const iu = base.u.indexOf(ch), il = base.l.indexOf(ch), id = base.d.indexOf(ch);
    if (iu>-1 && offU!=null) out += String.fromCodePoint(ch.codePointAt(0) - 0x41 + offU);
    else if (il>-1 && offL!=null) out += String.fromCodePoint(ch.codePointAt(0) - 0x61 + offL);
    else if (id>-1 && offD!=null) out += String.fromCodePoint(ch.codePointAt(0) - 0x30 + offD);
    else out += ch;
  }
  return out;
}

// Special maps (script/fraktur exceptions, circled, small, upside)
const OV_FRK = { 'C':'\u212D','H':'\u210C','I':'\u2111','R':'\u211C','Z':'\u2128' };
const OV_SCR = { 'B':'\u212C','E':'\u2130','F':'\u2131','H':'\u210B','I':'\u2110','L':'\u2112','M':'\u2133','R':'\u211B' };

function mapScript(txt){
  let out='';
  for (const ch of txt){
    const iu = base.u.indexOf(ch), il = base.l.indexOf(ch);
    if (iu>-1){
      out += OV_SCR[ch] || String.fromCodePoint(0x1D49C + iu);
    } else if (il>-1){
      out += String.fromCodePoint(0x1D4B6 + il);
    } else out += ch;
  }
  return out;
}
function mapFraktur(txt){
  let out='';
  for (const ch of txt){
    const iu = base.u.indexOf(ch), il = base.l.indexOf(ch);
    if (iu>-1){
      out += OV_FRK[ch] || String.fromCodePoint(0x1D504 + iu);
    } else if (il>-1){
      out += String.fromCodePoint(0x1D51E + il);
    } else out += ch;
  }
  return out;
}
function mapCircled(txt){
  let out='';
  for (const ch of txt){
    const iu=base.u.indexOf(ch), il=base.l.indexOf(ch), id=base.d.indexOf(ch);
    if (iu>-1) out += String.fromCodePoint(0x24B6 + iu);
    else if (il>-1) out += String.fromCodePoint(0x24D0 + il);
    else if (id>-1){
      if (ch==='0') out += '\u24EA';
      else out += String.fromCodePoint(0x2460 + (id-1));
    } else out += ch;
  }
  return out;
}

// Tiny superscripts (approx)
const SUP = {
  a:'áµƒ',b:'áµ‡',c:'á¶œ',d:'áµˆ',e:'áµ‰',f:'á¶ ',g:'áµ',h:'Ê°',i:'á¶¦',j:'Ê²',k:'áµ',l:'Ë¡',m:'áµ',n:'â¿',o:'áµ’',p:'áµ–',q:'á‘«',r:'Ê³',s:'Ë¢',t:'áµ—',u:'áµ˜',v:'áµ›',w:'Ê·',x:'Ë£',y:'Ê¸',z:'á¶»',
  A:'á´¬',B:'á´®',D:'á´°',E:'á´±',G:'á´³',H:'á´´',I:'á´µ',J:'á´¶',K:'á´·',L:'á´¸',M:'á´¹',N:'á´º',O:'á´¼',P:'á´¾',R:'á´¿',T:'áµ€',U:'áµ',V:'â±½',W:'áµ‚',
  '0':'â°','1':'Â¹','2':'Â²','3':'Â³','4':'â´','5':'âµ','6':'â¶','7':'â·','8':'â¸','9':'â¹'
};
function mapSup(txt){ return [...txt].map(ch=>SUP[ch]||ch).join(''); }

// Small-caps (approx using Unicode)
const SC = {'a':'á´€','b':'Ê™','c':'á´„','d':'á´…','e':'á´‡','f':'êœ°','g':'É¢','h':'Êœ','i':'Éª','j':'á´Š','k':'á´‹','l':'ÊŸ','m':'á´','n':'É´','o':'á´','p':'á´˜','q':'Ç«','r':'Ê€','s':'s','t':'á´›','u':'á´œ','v':'á´ ','w':'á´¡','x':'x','y':'Ê','z':'á´¢'};
function mapSmallCaps(txt){ return [...txt].map(ch=>SC[ch]||SC[ch?.toLowerCase()]||ch).join(''); }

// Upside-down
const UP = {'a':'É','b':'q','c':'É”','d':'p','e':'Ç','f':'ÉŸ','g':'Æƒ','h':'É¥','i':'á´‰','j':'É¾','k':'Ê','l':'×Ÿ','m':'É¯','n':'u','o':'o','p':'d','q':'b','r':'É¹','s':'s','t':'Ê‡','u':'n','v':'ÊŒ','w':'Ê','x':'x','y':'Ê','z':'z',
'A':'âˆ€','B':'ê“­','C':'Æ†','D':'â—–','E':'Æ','F':'â„²','G':'â…','H':'H','I':'I','J':'Å¿','K':'Ê','L':'Ë¥','M':'W','N':'N','O':'O','P':'Ô€','Q':'ÎŒ','R':'á´š','S':'S','T':'âŠ¥','U':'âˆ©','V':'Î›','W':'M','X':'X','Y':'â…„','Z':'Z',
'0':'0','1':'Æ–','2':'á„…','3':'Æ','4':'ã„£','5':'Ï›','6':'9','7':'ã„¥','8':'8','9':'6'};
function mapUpside(txt){
  return [...txt].reverse().map(ch=>UP[ch]||ch).join('');
}

/* ========= Arabic helpers ========= */
function applyKashida(s){
  // Ø£Ø¶Ù Ù€ Ø¨ÙŠÙ† Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ù…ØªØ¬Ø§ÙˆØ±Ø© ÙÙ‚Ø·
  const chars = [...s];
  let out = '';
  for (let i=0;i<chars.length;i++){
    out += chars[i];
    if ( AR_LET.test(chars[i]) && AR_LET.test(chars[i+1]||'') ) out += '\u0640'; // Ù€
  }
  return out;
}
function applyTashkeelLight(s){
  const diacs = ['\u064E','\u064F','\u0650','\u0652']; // ÙØªØ­Ø©ØŒ Ø¶Ù…Ø©ØŒ ÙƒØ³Ø±Ø©ØŒ Ø³ÙƒÙˆÙ†
  let out='', n=0;
  for (const ch of s){
    out += ch;
    if (AR_LET.test(ch) && (++n%2===0)) out += diacs[n%diacs.length];
  }
  return out;
}
function decorate(s,mode){
  if(!s.trim()) return s;
  if(mode===1) return `â€¢âœ§ ${s} âœ§â€¢`;
  if(mode===2) return `âŒ¯âŸ¡ ${s} âŸ¡âŒ¯`;
  return s;
}

/* ========= Styles ========= */
const STYLES = [
  {id:'plain',    name:'Ø¹Ø§Ø¯ÙŠ (Ø¨Ø¯ÙˆÙ† ØªØºÙŠÙŠØ±)', fn:(t)=>t},
  {id:'bold',     name:'Ø³Ù…ÙŠÙƒ Bold',          fn:(t)=>mapByOffset(t,0x1D400,0x1D41A,0x1D7CE)},
  {id:'italic',   name:'Ù…Ø§Ø¦Ù„ Italic',        fn:(t)=>mapByOffset(t,0x1D434,0x1D44E,null)},
  {id:'boldit',   name:'Ø³Ù…ÙŠÙƒ Ù…Ø§Ø¦Ù„',          fn:(t)=>mapByOffset(t,0x1D468,0x1D482,null)},
  {id:'sansb',    name:'Sans Ø¹Ø±ÙŠØ¶',          fn:(t)=>mapByOffset(t,0x1D5D4,0x1D5EE,0x1D7EC)},
  {id:'mono',     name:'Monospace',          fn:(t)=>mapByOffset(t,0x1D670,0x1D68A,0x1D7F6)},
  {id:'script',   name:'Script Ù…Ø²Ø®Ø±Ù',       fn:mapScript},
  {id:'frak',     name:'Fraktur',            fn:mapFraktur},
  {id:'ds',       name:'Doubleâ€‘Struck',      fn:(t)=>mapByOffset(t,0x1D538,0x1D552,0x1D7D8)},
  {id:'circ',     name:'Ø­Ø±ÙˆÙ Ø¯Ø§Ø®Ù„ Ø¯ÙˆØ§Ø¦Ø±',    fn:mapCircled},
  {id:'sup',      name:'Ø­Ø¬Ù… ØµØºÙŠØ± (Superscript)', fn:mapSup},
  {id:'sc',       name:'Smallâ€‘Caps (ØªÙ‚Ø±ÙŠØ¨ÙŠ)', fn:mapSmallCaps},
  {id:'flip',     name:'Ù…Ù‚Ù„ÙˆØ¨ (Upsideâ€‘Down)', fn:mapUpside},
  // Arabic-oriented
  {id:'kashida',  name:'Ø¹Ø±Ø¨ÙŠ â€” ØªØ·ÙˆÙŠÙ„ (Ù€)',  fn:applyKashida},
  {id:'tashkeel', name:'Ø¹Ø±Ø¨ÙŠ â€” ØªØ´ÙƒÙŠÙ„ Ø®ÙÙŠÙ',  fn:applyTashkeelLight},
];

/* ========= Render ========= */
function genAll(){
  const raw = src.value || '';
  const mods = {
    k: optK.checked,
    t: optT.checked,
    d1: optD1.checked,
    d2: optD2.checked,
  };
  const q = (filterEl.value||'').trim().toLowerCase();
  const results = [];

  for (const st of STYLES){
    if (q && !(`${st.id} ${st.name}`.toLowerCase().includes(q))) continue;
    let out = st.fn(raw);
    // optional decorations for Arabic/any
    if (mods.k && st.id!=='kashida') out = applyKashida(out);
    if (mods.t && st.id!=='tashkeel') out = applyTashkeelLight(out);
    if (mods.d1) out = decorate(out,1);
    if (mods.d2) out = decorate(out,2);

    results.push({id:st.id, name:st.name, text:out});
  }

  list.innerHTML = results.map(r=>`
    <div class="item">
      <div class="head">
        <div class="name">${r.name}</div>
        <div class="tools">
          <button class="btn" data-copy="${escapeHtml(r.text)}">Ù†Ø³Ø®</button>
        </div>
      </div>
      <div class="out">${escapeHtml(r.text) || '<span class="muted">â€”</span>'}</div>
    </div>
  `).join('');

  // bind copy
  list.querySelectorAll('[data-copy]').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const txt = btn.getAttribute('data-copy');
      copyText(decodeHtml(txt));
      btn.textContent='âœ“ ØªÙ… Ø§Ù„Ù†Ø³Ø®'; setTimeout(()=>btn.textContent='Ù†Ø³Ø®',900);
    });
  });

  countEl.textContent = results.length + ' Ù†ØªÙŠØ¬Ø©';
}
function copyText(s){
  if (navigator.clipboard?.writeText) navigator.clipboard.writeText(s);
  else {
    const t=document.createElement('textarea'); t.value=s; document.body.appendChild(t);
    t.select(); document.execCommand('copy'); t.remove();
  }
}
function escapeHtml(s){ return s.replace(/[&<>"]/g, m=>({ '&':'&amp;','<':'&lt;','>':'&gt;' }[m])); }
function decodeHtml(s){ return s.replace(/&amp;/g,'&').replace(/&lt;/g,'<').replace(/&gt;/g,'>'); }

/* ========= Events ========= */
['input','change'].forEach(ev=>{
  src.addEventListener(ev, genAll);
  filterEl.addEventListener(ev, genAll);
  optK.addEventListener(ev, genAll);
  optT.addEventListener(ev, genAll);
  optD1.addEventListener(ev, genAll);
  optD2.addEventListener(ev, genAll);
});

document.getElementById('btnCopyAll').onclick = ()=>{
  const texts=[...list.querySelectorAll('.out')].map(d=>d.textContent).join('\n');
  copyText(texts); alert('ØªÙ… Ù†Ø³Ø® ÙƒÙ„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬.');
};
document.getElementById('btnClear').onclick = ()=>{
  src.value=''; genAll();
};

// Load sample + autosave
const KEY='mazakhref_input_v1';
src.value = localStorage.getItem(KEY) || '';
src.addEventListener('input', ()=>localStorage.setItem(KEY, src.value));

// initial
genAll();
</script>
</body>
</html>
